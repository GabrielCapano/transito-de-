var digdin=window.digdin={formAjaxExecuting:!1,init:function(){digdin.verifyDependencies()&&(digdin.loadDateRegion(),digdin.loadDatepicker(),digdin.loadCheckToggle(),digdin.loadMaskMoney(),digdin.loadClear(),digdin.loadMask(),digdin.ajaxSetup(),digdin.loadEvents(),digdin.loadModal())},loadEvents:function(){$(document).on("change","[data-dgd-change]",digdin.eventHandle);$(document).on("click","[data-dgd-click]",digdin.eventHandle);$(document).on("keydown","[data-dgd-keydown]",digdin.eventHandle);$(document).on("keypress","[data-dgd-keypress]",digdin.eventHandle);$(document).on("keyup","[data-dgd-keyup]",digdin.eventHandle);$(document).on("dblclick","[data-dgd-dblclick]",digdin.eventHandle);$("[data-dgd-change=change]").change();$("[data-dgd-click=click]").click();$("[data-dgd-keydown=keydown]").keydown();$("[data-dgd-keypress=keypress]").keypress();$("[data-dgd-keyup=keyup]").keyup()},eventHandle:function(e){var data=$(this).data(),doNotAction=!1,obj1,obj,time;if(data.dgdKeypress!=undefined&&data.dgdKeypress!=""&&e.keyCode!=data.dgdKeypress&&(doNotAction=!0),!doNotAction){if(data.dgdCondition!=undefined&&!eval(data.dgdCondition))return e.preventDefault(),eval(data.dgdConditionCallback),!1;(data.dgdAction=="parentFormSubmitAjax"||data.dgdPreventDefault!=undefined)&&e.preventDefault();data.dgdConfirm!=undefined&&data.dgdConfirm!=""&&($("#confirmbox").modal({show:!0,backdrop:!1,keyboard:!1}),$("#confirmMessage").html(data.dgdConfirm),$("#confirmFalse").click(function(){$("#confirmbox").modal("hide")}),obj1=$(this),$("#confirmTrue").click(function(){$("#confirmbox").modal("hide");data.dgdAction in digdin.actions&&digdin.actions[data.dgdAction](obj1)}));data.dgdConfirm==undefined&&(data.dgdSchedule||(data.dgdAction in digdin.actions?digdin.actions[data.dgdAction]($(this)):(clearTimeout($(this).attr("data-dgd-timeout-id")),obj=$(this),time=setTimeout(function(){data.dgdAction in digdin.actions&&digdin.actions[data.dgdAction](obj);data.dgdCallback!=undefined&&data.dgdCallback!=""&&eval(data.dgdCallback)},data.dgdSchedule),$(this).attr("data-dgd-timeout-id",time))));data.dgdSchedule||data.dgdCallback==undefined||data.dgdCallback==""||eval(data.dgdCallback)}},actions:{filterList:function(n){var t=$(n).data(),u=$(t.dgdTarget),i=$(t.dgdTargetParent,u),r=$(n).val().toLowerCase();i.show();r!=""&&i.each(function(){var n=!0;$("[data-dgd-filter]",$(this)).each(function(){$(this).val().toLowerCase().indexOf(r)!=-1&&(n=!1)});n&&$(this).hide()})},editInline:function(n){var t=$(n).data();$(n).removeAttr("readonly");$(n).focus();$(n).blur(function(){$(this).attr("readonly","readonly");$(this).unbind("change")})},addEditor:function(n){var i=$(n).data(),r=$(i.dgdTarget),f=$(i.dgdSource),e=$(i.dgdTemplate),o=$(i.dgdEditorParent,r).length,u={},t;u.count=o;f.find("[data-dgd-name]").each(function(){u[$(this).attr("data-dgd-name")]=$(this).val()});t=$(digdin.addValueToTemplate(u,e.html()));i.dgdAppend?r.prepend(t):r.append(t);digdin.loadDatepicker(t);digdin.loadMaskMoney(t);digdin.loadClear(t);digdin.loadMask(t);t.find(".chosen").chosen()},click:function(n){var t=$(n).data(),i=$(t.dgdTarget);i.click()},ajaxCall:function(obj){var data=$(obj).data(),ajaxData={},func;data.dgdSourceData!=null&&data.dgdSourceData!=undefined?(func=eval(data.dgdSourceData),ajaxData=typeof func=="function"?func(obj):func):ajaxData=data;$.ajax({url:data.dgdSource,type:"POST",data:ajaxData,dataType:"json",complete:function(){},success:function(resp){data.dgdAlertCondition!=undefined&&data.dgdAlertCondition!=""?eval(data.dgdAlertCondition)&&digdin.callMessage(resp.Messages.join("<\/br>"),resp.Status,data.dgdAjaxCallback,resp,obj):digdin.callMessage(resp.Messages.join("<\/br>"),resp.Status,data.dgdAjaxCallback,resp,obj)}})},copyFormValues:function(n){var t=$(n).data(),i=$(t.dgdTarget),r=$(t.dgdSource),u=r.find("[data-dgd-name]");u.each(function(){$("[data-dgd-name="+$(this).attr("data-dgd-name")+"]",i).val($(this).val()).change()})},toggle:function(n){var t=$(n).data(),i=$(t.dgdTarget);i.toggle()},append:function(n){var t=$(n).data(),i=$(t.dgdTarget),r=$(t.dgdTemplate).html(),n;t.dgdSource!=""&&t.dgdSource!=undefined?t.dgdSourceType=="form"&&(n=digdin.getJson($(t.dgdSource)),i.append(digdin.addValueToTemplate(n,r))):i.append(r)},removeClosest:function(n){var t=$(n).data();$(n).closest(t.dgdTarget).remove()},parentFormSubmitAjax:function(n){if(!digdin.formAjaxExecuting){digdin.formAjaxExecuting=!0;var t=$(n).data(),i=$(n).closest("form");$.ajax({url:i.attr("action"),type:i.attr("method"),data:i.serialize(),complete:function(){digdin.formAjaxExecuting=!1},success:function(resp){t.dgdAlertCondition!=undefined&&t.dgdAlertCondition!=""?(digdin.removeFormCache(i),eval(t.dgdAlertCondition)&&digdin.callMessage(resp.Messages.join("<\/br>"),resp.Status,t.dgdAjaxCallback,resp,n)):digdin.callMessage(resp.Messages.join("<\/br>"),resp.Status,t.dgdAjaxCallback,resp,n)}})}},fill:function(n){var t=n.data(),i=$(t.dgdTarget),r=$(t.dgdTemplate).html();i.html("");(t.dgdUrl!=undefined||t.dgdSource!=undefined)&&$.ajax({url:t.dgdUrl!=undefined?t.dgdUrl:t.dgdSource,type:"post",dataType:"json",data:{id:n.val()},success:function(resp){var e,func;for(e in resp)i.append(digdin.addValueToTemplate(resp[e],r));t.dgdAjaxCallback!=undefined&&t.dgdAjaxCallback!=""&&(func=eval(t.dgdAjaxCallback),func(resp))}})}},loadFormCache:function(){var n=window.location.href,t=$("[data-dgd-action=parentFormSubmitAjax]").closest("form");t.each(function(){var u=$(this),e=$("input:text, input:checkbox, input:radio, textarea, select",u).filter("[value!=]").filter("[value!=0]").not("select, [data-val-date]").length==0,t=$.parseJSON(localStorage.getItem(u.attr("id")+n)),i,r,f;if(t!=null&&e)for(i in t)r=$("[name="+i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"]"),f=r.val(),f==""&&r.val(t[i])});window.onbeforeunload=digdin.saveFormCache},removeFormCache:function(n){var t=window.location.href;localStorage.setItem(n.attr("id")+t,null)},saveFormCache:function(){var n=window.location.href,t=$("[data-dgd-action=parentFormSubmitAjax]").closest("form");t.each(function(){var t=$(this),r=$("input:text, input:checkbox, input:radio, textarea, select",t),i={};r.each(function(){var n=$(this);i[n.attr("name")]=n.val()});localStorage.setItem(t.attr("id")+n,JSON.stringify(i))})},loadModal:function(){$("body").append($(digdin.templates.modal))},loadMaskMoney:function(n){n!=undefined?$("[data-dgd-currency]",n).maskMoney({symbol:"R$ ",thousands:".",decimal:","}):$("[data-dgd-currency]").maskMoney({symbol:"R$ ",thousands:".",decimal:","})},loadCheckToggle:function(){$("[data-dgd-check-toggle]").each(function(){$(this).attr("data-dgd-checked")!=undefined&&$(this).find("input:checkbox").attr("checked",!0);var n=$(this).data();$(this).toggleButtons({width:60,label:{enabled:n.dgdCheckOn,disabled:n.dgdCheckOff}})})},loadDateRegion:function(){$.datepicker.regional["pt-BR"]={closeText:"Fechar",prevText:"&#x3c;Anterior",nextText:"Pr&oacute;ximo&#x3e;",currentText:"Hoje",monthNames:["Janeiro","Fevereiro","Mar&ccedil;o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthNamesShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],dayNames:["Domingo","Segunda-feira","Ter&ccedil;a-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sabado"],dayNamesShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],dayNamesMin:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};$.datepicker.setDefaults($.datepicker.regional["pt-BR"])},loadDatepicker:function(n){n!=undefined?$("[data-dgd-datepicker]",n).datepicker():$("[data-dgd-datepicker]").each(function(){var data=$(this).data(),ob=$(this),minDate;ob.datepicker();switch(data.dgdMinDateType){case"date":minDate=eval(data.dgdMinDate);$(ob).datepicker("option","minDate",minDate);break;case"selector":$(data.dgdMinDate).change(function(){var n=$.datepicker.parseDate("dd/mm/yy",$(this).val());$(ob).datepicker("option","minDate",n)})}})},loadClear:function(){$("[data-dgd-clear]").each(function(){var n=$(this).attr("data-dgd-clear");($(this).val()==n||n=="")&&$(this).val("")})},loadMask:function(n){n!=undefined?$("[data-dgd-mask]",n).each(function(){$(this).mask($(this).attr("data-dgd-mask"))}):$("[data-dgd-mask]").each(function(){$(this).mask($(this).attr("data-dgd-mask"))})},callMessage:function(n,t,i,r,u){$.blockUI({baseZ:2e3,message:'<div style="background:'+(t?"#1d943b":"#bb2413")+';color:white;padding:15px;line-height:20px;"><h4>'+n+"<\/h4><\/div>",css:{border:"none"}});setTimeout(function(){if($.unblockUI(),i!=undefined&&i!=""){var func=eval(i);func(r,u)}},1e3)},ajaxSetup:function(){setTimeout(function(){$(document).ajaxStart(function(){digdin.blockUi()}).ajaxComplete(function(){digdin.unblockUi()})},400)},unblockUi:function(){$(".block-ui-black").fadeOut(200,function(){$(this).remove()})},blockUi:function(){var n=$(digdin.templates.blockUi).hide();$("body").append(n);n.show()},addAction:function(n,t){digdin.actions[n]=t},addValueToTemplate:function(n,t){var i,o,s,h,r,u,f,e,c;if(typeof t=="string"){for(i in n)if(typeof n[i]=="object"&&n[i]!=null&&n[i]!=undefined)for(o in n[i])s=new RegExp("{"+i+"."+o+"}","gi"),t=t.replace(s,n[i][o]);else if(n.hasOwnProperty(i)&&(h=new RegExp("{"+i+":.*?}|{"+i+"}","gi"),r=t.match(h),r!=null))for(u=0;u<r.length;u++)f=r[u].split(":")[1],e=n[i],f!=null&&(f=f.replace("}",""),e=digdin.types[f](e)),c=new RegExp(r[u],"gi"),t=t.replace(c,e);return t}return""},types:{currency:function(n){var t=parseInt(parseInt(n*Math.pow(10,2))/parseFloat(Math.pow(10,2))),i=parseInt(parseInt(n*Math.pow(10,2))%parseFloat(Math.pow(10,2))),f,u,r;return i%10==0&&i+0<2?i=i+"0":i<10&&(i="0"+i),f=parseInt(t/1e3),t=t%1e3,u="",f>0&&(u=f+"."+u,t==0?t="000":t<10?t="00"+t:t<100&&(t="0"+t)),u+=t+","+i,r=n+"",r=r.replace(/(\.[0-9]{2})$/g,",$1"),r.length>6&&(r=r.replace(/([0-9]{3}),([0-9]{2}$)/g,".$1,$2")),"R$ "+u}},getJson:function(n){var t="[data-dgd-name]",r=n.find(t),i={};return r.each(function(){i[$(this).attr(t.replace("[","").replace("]",""))]=$(this).val()}),i},verifyDependencies:function(){return jQuery==undefined?(console.error("jQuery library is not loaded, please include it in file or check for file's order"),!1):$.datepicker==undefined?(console.error("jQuery UI datepicker library is not loaded, please include it in file or check for file's order"),!1):$.mask==undefined?(console.error("jQuery MaskedInput plugin is not loaded, please include it in file or check for file's order"),!1):!0},templates:{blockUi:'<div class="block-ui-black" style="position:fixed; top:0; left:0; width: 100%; height:100%; background-color: #000; opacity:0.8;"><\/div>',modal:'<div class="modal" id="confirmbox" style="display: none"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;<\/button><h4 class="modal-title">Aviso<\/h4><\/div><div class="modal-body"><p id="confirmMessage">Any confirmation message?<\/p><\/div><div class="modal-footer"><button class="btn" id="confirmFalse">Cancelar<\/button><button class="btn btn-primary" id="confirmTrue">Confirmar<\/button><\/div><\/div>'}};
/*
//# sourceMappingURL=digdin.min.js.map
*/