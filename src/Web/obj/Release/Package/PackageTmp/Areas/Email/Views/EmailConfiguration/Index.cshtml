@model EmailConfigurationViewModel

@{
    ViewBag.Title = "Configuração de Email";
    var isEdit = ViewBag.FormType == "Editar";
}

@section Breadcrumb
{
    <h3>
        <span>Configuração de Email</span>
        <small>@ViewBag.FormType</small>
    </h3>
    <ul class="breadcrumb">
        <li>
            <i class="icon-home"></i>
            <a href="#">Email</a>
            <i class="icon-angle-right"></i>
        </li>
        <li>
            <a href="@Url.Action("List")">@ViewBag.Title</a>
            <i class="icon-angle-right"></i>
        </li>
        <li>
            <a href="#">@ViewBag.FormType</a>
        </li>
    </ul>
}

@section Scripts
{
    <script>
        digdin.init();

        var responseHandle = function (data, resp) {
            if (data.Status)
                window.location.href = '@Url.Action("List")';
        };

    </script>
}

<div class="row-fluid">
    <div class="span12">

        <div class="portlet box blue">
            <div class="portlet-title">
                <div class="caption">
                    <i class="icon-reorder"></i>
                    <span class="hidden-480">@ViewBag.Title</span>
                </div>
            </div>

            <div class="portlet-body form tab-content tab-pane">

                @using (Html.BeginForm("Save", "EmailConfiguration", FormMethod.Post))
                {
                    @Html.ValidationSummary()

                    @Html.AntiForgeryToken()

                    @Html.HiddenFor(a => a.Id)
                    @Html.HiddenFor(a => a.LastUpdated)
                    @Html.HiddenFor(a => a.CreatedDate)
                    @Html.HiddenFor(a => a.UpdatedBy)
                    @Html.HiddenFor(a => a.CreatedBy)

                    <div class="row-fluid">
                        <div class="sapn12">
                            <h3 class="form-section">Dados Gerais</h3>
                            <div class="row-fluid">
                                <div class="span6">
                                    <div class="control-group">
                                        @Html.LabelFor(a => a.Name, new { @class = "control-label" })
                                        <div class="controls">
                                            @Html.TextBoxFor(a => a.Name, new { @class = "span12 m-wrap" })
                                        </div>
                                    </div>
                                </div>
                                <div class="span6">
                                    <div class="control-group">
                                        @Html.LabelFor(a => a.ConfigurationType, new { @class = "control-label" })
                                        <div class="controls">
                                            @(Html.DropDownListFor(a => a.ConfigurationType, Model.ConfigurationTypeList,
                                                  new
                                                  {
                                                      @class = "span12 m-wrap",
                                                      @data_dgd_change = "change",
                                                      @data_dgd_template = "#optionTemplate",
                                                      @data_dgd_action = "fill",
                                                  }))
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row-fluid">
                        <div class="span6">
                            <div class="control-group">
                                @Html.LabelFor(a => a.FromName, new { @class = "control-label" })
                                <div class="controls">
                                    @Html.TextBoxFor(a => a.FromName, new { @class = "span12 m-wrap" })
                                </div>
                            </div>
                        </div>
                        <div class="span6">
                            <div class="control-group">
                                @Html.LabelFor(a => a.From, new { @class = "control-label" })
                                <div class="controls">
                                    @Html.TextBoxFor(a => a.From, new { @class = "span12 m-wrap" })
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row-fluid">
                        <div class="span3">
                            <div class="control-group">
                                @Html.LabelFor(a => a.Port, new { @class = "control-label" })
                                <div class="controls">
                                    @Html.TextBoxFor(a => a.Port, new { @class = "span12 m-wrap", @maxlength = 3 })
                                </div>
                            </div>
                        </div>
                        <div class="span3">
                            <div class="control-group">
                                @Html.LabelFor(a => a.SMTP, new { @class = "control-label" })
                                <div class="controls">
                                    @Html.TextBoxFor(a => a.SMTP, new { @class = "span12 m-wrap" })
                                </div>
                            </div>
                        </div>
                        <div class="span6">
                            <div class="control-group">
                                @Html.LabelFor(a => a.Url, new { @class = "control-label" })
                                <div class="controls">
                                    @Html.TextBoxFor(a => a.Url, new { @class = "span12 m-wrap" })
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row-fluid">
                        <div class="span3">
                            <div class="control-group">
                                @Html.LabelFor(a => a.Login, new { @class = "control-label" })
                                <div class="controls">
                                    @Html.TextBoxFor(a => a.Login, new { @class = "span12 m-wrap" })
                                </div>
                            </div>
                        </div>
                        <div class="span3">
                            <div class="control-group">
                                @Html.LabelFor(a => a.Password, new { @class = "control-label" })
                                <div class="controls">
                                    @Html.TextBoxFor(a => a.Password, new { @class = "span12 m-wrap" })
                                </div>
                            </div>
                        </div>
                        <div class="span4">
                            <div class="control-group">
                                <div class="controls span8" style="margin-top: 20px;">
                                    @Html.LabelFor(a => a.IsHabilited, new { @class = "control-label pull-right" })
                                    @Html.CheckBoxFor(a => a.IsHabilited, new { @class = "span4 m-wrap" })
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" data-dgd-click=""
                                data-dgd-condition-callback="digdin.callMessage('Você deve preencher todos os campos!');"
                                data-dgd-action="parentFormSubmitAjax"
                                data-dgd-ajax-callback="responseHandle"
                                class="btn blue pull-right margin-top-10">
                            Salvar <i class="icon-save"></i>
                        </button>
                        <a href="@Url.Action("List")" class="btn blue pull-right margin-right-10 margin-top-10">Voltar</a>
                    </div>
                }

            </div>
        </div>
    </div>
</div>

<script type="text/html" id="optionTemplate">
    <option value="{Value}">{Text}</option>
</script>